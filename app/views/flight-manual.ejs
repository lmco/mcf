<%
/**
 * Classification: UNCLASSIFIED
 *
 * @module views.flight-manual
 *
 * @copyright Copyright (C) 2018, Lockheed Martin Corporation
 *
 * @license LMPI
 *
 * @author Josh Kaplan <joshua.d.kaplan@lmco.com>
 *
 * @description This file defines the view for the MBEE flight manual.
 */
%>

<div class="container">
  <div id="fm" class="row">
    <div class="col-12">
      <h1 class="title">Flight Manual</h1>
    </div>
    <div class="col-4">
      <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
        <% for (let i = 0; i < sections.length; i++ ) { %>
          <a class="nav-link <%= (i === 0) ? 'active': '' %>"
             id="<%= sections[i].id %>-tab"
             data-toggle="pill"
             href="#<%= sections[i].id %>"
             role="tab"
             aria-controls="<%= sections[i].id %>"
             aria-selected="<%= (i === 0) ? 'true': 'false' %>">
            <%= sections[i].title %>
          </a>
        <% } %>
      </div>
    </div>
    <div class="col-8">
      <div class="tab-content" id="v-pills-tabContent">
        <% for (let i = 0; i < sections.length; i++ ) { %>
        <div class="tab-pane fade <%= (i === 0) ? 'show active': '' %>"
             id="<%= sections[i].id %>"
             role="tabpanel"
             aria-labelledby="<%= sections[i].id %>-tab">
          <%- sections[i].content %>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</div>




<%- contentFor('styles') %>
<link type="text/css" rel="stylesheet" href="/css/fm.css">

<%- contentFor('scripts') %>
<script>
  /*$(function(){
    var hash = window.location.hash;
    hash && $('ul.nav a[href="' + hash + '"]').tab('show');

    $('.nav-tabs a').click(function (e) {
      $(this).tab('show');
      var scrollmem = $('body').scrollTop();
      window.location.hash = this.hash;
      $('html,body').scrollTop(scrollmem);
    });
  });*/

  // Javascript to enable link to tab
  var url = document.location.toString();
  if (url.match('#')) {
    $('.nav-tabs a[href="#' + url.split('#')[1] + '"]').tab('show');
  }

  // Change hash for page-reload
  $('.nav-pills a').on('shown.bs.tab', function (e) {
    window.location.hash = e.target.hash;
  })
</script>

